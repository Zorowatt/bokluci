app.controller("HomeCtrl",["$scope","$resource","$http","$q","identity","$location",function(e,t,r,n,c,s){e.identity=c;e.addProduct=function(){if(!c.isAuthenticated()){return}s.path("/addProduct")};e.search="";var o=0;e.step=8;function i(e,r,n){var c=t("/api");return c.query({s:e,l:r,search:n})}e.products=i(o,e.step,e.search);e.prev=function(){if(o>=e.step){o=o-e.step;i(o,e.step,e.search).$promise.then(function(t){e.products=t})}};e.next=function(){o=o+e.step;i(o,e.step,e.search).$promise.then(function(t){if(t.length===0){o=o-e.step}else{e.products=t}})};e.getProd=function(e){return r.get("/api/search",{params:{search:e}}).then(function(e){return e.data})};$("body").keyup(function(t){if(event.keyCode==13){if($(".search").is(":focus")){e.goSearch()}}});e.goSearch=function(){e.search=e.search.trim();r.get("/api",{params:{s:o,l:e.step,search:e.search}}).success(function(t,r,n,c){if(t.length>0){e.products=t}}).error(function(e){console.log("Resource reading failed: "+e)});$(".search").blur();$("ul li:nth-child(1)").focus()};e.getNumber=function(e){var t=0;e.forEach(function(e){if(!e.flagIsNew){t++}});return t}}]);