app.controller("HomeCtrl",["$scope","$resource","$http","$q","identity",function(e,r,c,s,t){e.identity=t;e.searchBuffer=[];e.enterIntoInput=function(){c.get("/api/search",{params:{search:e.search.trim()}}).success(function(r,c,s,t){e.searchBuffer=r}).error(function(e){console.log("Resource reading failed: "+e)})};function n(e){var c=r("/api/search");return c.query({search:e})}e.select=function(r){e.searchBuffer=[];e.search=r;e.goSearch()};$("body").keyup(function(r){if(event.keyCode==13){if(e.searchBuffer.length>0){e.searchBuffer=[];e.goSearch()}}if(event.keyCode==9){if(e.searchBuffer.length>0){e.search=e.searchBuffer[0];e.searchBuffer=[];e.goSearch()}}});e.search="";var a=0;e.step=6;function o(e,c,s){var t=r("/api");return t.query({s:e,l:c,search:s})}e.products=o(a,e.step,e.search);e.goSearch=function(){e.search=e.search.trim();c.get("/api",{params:{s:a,l:e.step,search:e.search}}).success(function(r,c,s,t){e.products=r}).error(function(e){console.log("Resource reading failed: "+e)})};e.getNumber=function(e){var r=0;e.forEach(function(e){if(!e.flagIsNew){r++}});return r};e.prev=function(){if(a>=e.step){a=a-e.step;o(a,e.step,e.search).$promise.then(function(r){e.products=r})}};e.next=function(){a=a+e.step;o(a,e.step,e.search).$promise.then(function(r){if(r.length===0){a=a-e.step}else{e.products=r}})}}]);