app.controller("HomeCtrl",["$scope","$resource","$http","$q","$location","$modal",function(e,t,n,r,o,c){e.nothing=false;e.info="Засега няма информация за това което търсите!";e.sel=function(){e.goSearch()};e.ent=function(){e.goSearch()};e.addProduct=function(){var e=c.open({templateUrl:"/p/partials/add",controller:"AddCtrl",backdrop:"static",keyboard:false,windowClass:"modal fade in"});e.result.then(function(e){})};e.search="";var s=0;e.step=6;function a(e,n,r){var o=t("/api");return o.query({s:e,l:n,search:r})}e.products=a(s,e.step,e.search);e.prev=function(){if(s>=e.step){s=s-e.step;a(s,e.step,e.search).$promise.then(function(t){e.products=t})}};e.next=function(){s=s+e.step;a(s,e.step,e.search).$promise.then(function(t){if(t.length===0){s=s-e.step}else{e.products=t}})};e.getProd=function(e){return n.post("/api/search",{search:e}).then(function(e){return e.data})};e.goSearch=function(){e.nothing=false;e.search=e.search.trim();n.get("/api",{params:{s:s,l:e.step,search:e.search}}).success(function(t,n,r,o){if(t.length>0){return e.products=t}e.nothing=true;e.products=""}).error(function(e){console.log("Resource reading failed: "+e)})};e.getNumber=function(e){var t=0;e.forEach(function(e){if(!e.flagIsNew){t++}});return t}}]);