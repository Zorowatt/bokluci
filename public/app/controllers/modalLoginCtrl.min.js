app.controller("ModalLoginCtrl",["$scope","$modalInstance","auth",function(e,n,s){e.user={username:"",password:""};$("body").keyup(function(n){if(event.keyCode==13&&n.currentTarget.className=="modal-open"){console.log(n);if(e.user.username.length>0&&e.user.password.length>0){e.ok()}else{if(e.user.password.length>0&&!!document.getElementById("username")){document.getElementById("username").focus()}else{if(e.user.username.length>0&&!!document.getElementById("pass")){document.getElementById("pass").focus()}}}}});e.clear=function(){document.getElementById("redAlert").innerHTML=""};e.forgottenPass=function(){n.close("s")};e.ok=function(){if(e.user){if(!e.user.username){document.getElementById("redAlert").innerHTML="Enter Username!";document.getElementById("username").focus();return}if(!e.user.password){document.getElementById("redAlert").innerHTML="Enter Password!";document.getElementById("pass").focus();return}s.login(e.user).then(function(s){if(s.data.success){n.close(s.data.user)}else{e.user.username="";e.user.password="";document.getElementById("redAlert").innerHTML="Wrong username or password!";document.getElementById("username").focus()}},function(e){console.log("something wrong: "+e)})}};e.cancel=function(){n.dismiss("cancel")};e.signUp=function(){n.close("signUp")}}]);