app.controller("ModalSignupCtrl",["$scope","$modalInstance","auth",function(e,n,t){e.clearEmail=function(){$(".redAlertEmail").text("")};e.clearUsernameError=function(){$("#redAlert").text("")};function r(e){var n=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;if(e.match(n)){return true}else{return false}}e.signUp=function(a){$(".redAlertEmail").text("");if(!r(e.user.email)){$(".redAlertEmail").text("Invalid E-mail!");return}t.signUp(a).then(function(t){if(t.data.success){n.close(t.data.user)}else{e.user.username="";e.user.password="";if(t.data.reason.indexOf("duplicate key")!=-1){document.getElementById("redAlert").innerHTML="This Username Exists!";return}document.getElementById("redAlert").innerHTML=t.data.reason}},function(e){console.log("something wrong: "+e)})};e.cancel=function(){n.dismiss("cancel")}}]);