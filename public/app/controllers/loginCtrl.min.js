app.controller("LoginCtrl",["$scope","identity","auth","$modal","$location",function(t,n,e,o,r){t.identity=n;t.user={};t.addProduct=function(){if(!n.isAuthenticated()){return}r.path("/addProduct")};t.logout=function(){e.logout().then(function(e){if(e.data.success){n.currentUser=undefined;t.user.username="";t.user.password="";r.path("/")}},function(t){console.log("something wrong happened during logging out on the server : "+t)})};t.SignIn=function(t){$("#si").blur();var e=o.open({templateUrl:"/p/partials/modalLogin",controller:"ModalLoginCtrl",size:t});e.result.then(function(t){if(t=="signUp"){var e=o.open({templateUrl:"/p/partials/modalSignup",controller:"ModalSignupCtrl"});e.result.then(function(t){if(t.success){alert(t.reason)}r.path("/")});return}if(t=="s"){var e=o.open({templateUrl:"/p/partials/modalForgottenPass",controller:"ModalForgottenPassCtrl",size:"sm"});e.result.then(function(t){if(t){alert(t)}});return}if(t){n.currentUser=t}},function(){})}}]);