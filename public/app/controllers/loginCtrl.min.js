app.controller("LoginCtrl",["$scope","identity","auth","$modal","$location",function(n,t,e,o,r){n.identity=t;n.user={};n.logout=function(){e.logout().then(function(e){if(e.data.success){t.currentUser=undefined;n.user.username="";n.user.password="";r.path("/")}},function(n){console.log("something wrong happened during logging out on the server : "+n)})};n.oldUser=function(n){var e=o.open({templateUrl:"/p/partials/modalLogin",controller:"ModalLoginCtrl",size:n});e.result.then(function(n){if(n=="s"){l();return}if(n){t.currentUser=n}},function(){})};n.newUser=function(n){var t=o.open({templateUrl:"/p/partials/modalSignup",controller:"ModalSignupCtrl",size:n});t.result.then(function(n){if(n.success){alert(n.reason)}r.path("/")})};function l(){var n=o.open({templateUrl:"/p/partials/modalForgottenPass",controller:"ModalForgottenPassCtrl",size:"sm"});n.result.then(function(n){if(n){alert(n)}})}}]);