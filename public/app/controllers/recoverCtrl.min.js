app.controller("RecoverCtrl",["$scope","$location","auth",function(e,s,n){e.user={};e.user.id=s.search().id;e.passwordConfirm="";e.clearpass=function(){document.getElementsByClassName("pass")[0].innerHTML=""};e.clearconf=function(){document.getElementsByClassName("conf")[0].innerHTML=""};$("#pass").on("input",function(){var s=$(this).val();var n=s.replace(/[^a-zA-Z0-9_<>?]/g,"");var o=s.slice(-1);if(s!=n){if(o==" "){e.popSymbol="Space - is not allowed!"}else{e.popSymbol="' "+o+" '"+" - is not allowed!"}$("#wrongSymbol").trigger("show");setTimeout(function(){$("#wrongSymbol").trigger("hide")},2e3);$(this).val(s=s.substring(0,s.length-1))}});$("#passconfirm").on("input",function(){var e=$(this).val();var s=e.replace(/[^a-zA-Z0-9_<>?]/g,"");if(e!=s){$(this).val(e=e.substring(0,e.length-1))}});e.recover=function(){if(!e.user.password){document.getElementsByClassName("pass")[0].innerHTML="Enter password!";return}if(e.user.password.length>15){document.getElementsByClassName("pass")[0].innerHTML="Less than 15 symbols!";return}if(!e.passwordConfirm){document.getElementsByClassName("conf")[0].innerHTML="Retype password!";return}if(e.user.password!=e.passwordConfirm){document.getElementsByClassName("conf")[0].innerHTML="Passwords not much!";return}n.passrecover(e.user).then(function(n){if(n.data.success){alert("Done!");s.path("/")}else{e.user.password="";alert(n.data.reason)}},function(e){console.log("something else is wrong: "+e)})}}]);