(function(n){"use strict";function i(n,i){n.module("angularSpinner",[]).factory("usSpinnerService",["$rootScope",function(n){var i={};i.spin=function(i){n.$broadcast("us-spinner:spin",i)};i.stop=function(i){n.$broadcast("us-spinner:stop",i)};return i}]).directive("usSpinner",["$window",function(e){return{scope:true,link:function(s,t,r){var p=i||e.Spinner;s.spinner=null;s.key=n.isDefined(r.spinnerKey)?r.spinnerKey:false;s.startActive=n.isDefined(r.spinnerStartActive)?s.$eval(r.spinnerStartActive):s.key?false:true;function o(){if(s.spinner){s.spinner.stop()}}s.spin=function(){if(s.spinner){s.spinner.spin(t[0])}};s.stop=function(){s.startActive=false;o()};s.$watch(r.usSpinner,function(n){o();s.spinner=new p(n);if(!s.key||s.startActive){s.spinner.spin(t[0])}},true);s.$on("us-spinner:spin",function(n,i){if(i===s.key){s.spin()}});s.$on("us-spinner:stop",function(n,i){if(i===s.key){s.stop()}});s.$on("$destroy",function(){s.stop();s.spinner=null})}}}])}if(typeof define==="function"&&define.amd){define(["angular","spin"],i)}else{i(n.angular)}})(window);